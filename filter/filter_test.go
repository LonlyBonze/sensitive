package filter

import (
	"testing"
	"time"
)

func BenchmarkFilter(b *testing.B) {
	// è¿è¡Œè¯¥æµ‹è¯•å‰éœ€ä¿®æ”¹config.goé‡Œé¢çš„æ–‡ä»¶å¤¹è·¯å¾„ä¸º"../conf/sensitive_words"
	// æ‰§è¡Œè¯­å¥ï¼šåœ¨filteræ–‡ä»¶å¤¹ä¸‹ï¼šgo test -bench=. -run=none
	begin := time.Now()
	err := Init()
	if err != nil {
		b.Errorf("%v", err)
	}
	b.Logf("%dms", time.Now().Sub(begin).Milliseconds())
	cases := []string{
		"çŒœåäºŒç”Ÿè‚–?(å¥”é€¸ç»å°˜æ‰“ä¸€ä¸ªç”Ÿè‚–)(ä¸€å¥çœŸè¨€:å¥”é€¸ç»å°˜)çŒœä»€ä¹ˆåŠ¨ç‰©?<p><p>###040+#åŠ Â·å¨Â·âˆ¨Â·ä¿¡ï¼šã€ W855ï½329 ã€‘ ä¸ºæ‚¨è§£--ç­”",
		"13mknfokg12ahrsoevw26",
		"è°æœ‰æ¯’å“å–å•Šï¼Œå¤§çº¦å¤šå°‘é’±ä¸€å…‹",
		"ä½ æ˜¯ä¸æ˜¯ç»ƒæ³•è½®åŠŸçš„",
		"å‡ ä¸ªç‚¹æä¸€ä¸‹ï¼Œå’¨è¯¢.1.4.7ï½0.0.0.6ï½6.3.7.2ã€‚1.ã€é…å¥—é½å…¨ã€‘ å…±äº«åŸä¸œå¤§é…å¥—ï¼Œå‘¨è¾¹4å¤§ç»¼åˆä½“é½èš:ä¸­éªä¸–ç•ŒåŸã€æ˜Ÿå…‰è€€å¹¿åœºã€åå¤§æ³°ç¦¾å¹¿åœºã€æ¶¦æŸ é¦™æ¸¯åŸ;",
		"â˜cherry.ç„¶ç„¶â™›â˜œ ä½ è¢«ç§»å‡ºäº†ç¾¤@â˜cherry.ç„¶ç„¶â™›â˜œ éª—ä½ çš„ğŸ˜ğŸ˜ğŸ˜ğŸ˜ ",
	}
	b.ResetTimer()

	for i := 0; i < b.N; i++ {
		for _, c := range cases {
			b.Logf("%s", Inst.Filter(c))
		}
	}
}
